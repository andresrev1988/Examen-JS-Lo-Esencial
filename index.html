<!DOCTYPE html>
<html>
<head>
	<meta content="text/html"; charset="UTF-8" />
	<title>Notas - Escuela</title>	
</head>

<body>
<header>
	<h1>Notas del Curso</h1>	
</header>

<p id="objetos"></p>
<p id="calcular_promedio"></p>
<p id="estudiante_mayor"></p>
<p id="estudiante_menor"></p>

<button onclick="mostrarObjeto()"> Mostrar Objetos JSON</button>
<button onclick="mostrarPromedio()">Calcular Promedio</button>
<button onclick="mostrarMayor()">Calcular Mayor</button>
<button onclick="mostrarMenor()">Calcular Menor</button>

</body>
<script type="text/javascript" source="js/funciones.js">
 var notas_curso = [

    {
        "codigo": "001",
        "nombre": "DIEGO RUIZ",
        "nota": 93
    } ,
    {
        "codigo": "002",
        "nombre": "JUAN BALAREZO",
        "nota": 70
    } ,  
    {
        "codigo": "003",
        "nombre": "PEDRO RIOS",
        "nota": 20
    } ,  
    {
        "codigo": "004",
        "nombre": "ANDRES REVELO",
        "nota": 98
    } ,  
    {
        "codigo": "005",
        "nombre": "ROSSANA SERRANO",
        "nota": 88
    } ,  
    {
        "codigo": "006",
        "nombre": "FRANCISCO CORTEZ",
        "nota": 55
    } ,  
    {
        "codigo": "007",
        "nombre": "MARIO MALDONADO",
        "nota": 91
    } ,  
    {
        "codigo": "008",
        "nombre": "LORENA MANCERO",
        "nota": 76
    } ,  
    {
        "codigo": "009",
        "nombre": "CESAR SALINAS",
        "nota": 45
    } ,  
    {
        "codigo": "010",
        "nombre": "JUAN CASTILLO",
        "nota": 10
    }  
];

function leerJSON(id,json) {	
	try {
		var out = "-----------Estudiantes-----------<br>";	
		for (var i = 0; i < json.length; i++) {
			out += "CÃ³digo:" + json[i].codigo + "-" + "Nombre:" + json[i].nombre + "-" + "Nota:" + json[i].nota + "<br>";
		}
		document.getElementById(id).innerHTML = out;	 
	} catch (error) {
		alert("Existe un Error" + " - " + error.message);
	}
}

function calcularPromedio(id,json) {
	try {
    	var out = "Total Promedio: ";
    	var totalPromedio = 0.0;
    	for (var i = 0; i < json.length; i++) {
	        totalPromedio += json[i].nota;
    	}
    	totalPromedio=totalPromedio/i;
    	document.getElementById(id).innerHTML = out+totalPromedio;	 
    } catch (error) {
		alert("Existe un Error" + " - " + error.message);
	}
}

function calcularMayor(id,json) {
	try {
    	var out = "Estudiante con Mayor Nota: ";    
    	var indice=0;
    	for (var i = 0; i < json.length; i++) {      		    		   	
    		if( json[i].nota >= json[indice].nota){    			
    			indice=i;    			
			}	
		}							
		document.getElementById(id).innerHTML = out+json[indice].nombre;		
	} catch (error) {
		alert("Existe un Error" + " - " + error.message);
	}  	    		    
}       


function calcularMenor(id,json) {
	try {
    	var out = "Estudiante con Mayor Nota: ";    
    	var indice=0;
    	for (var i = 0; i < json.length; i++) {      		    		   	
    		if( json[i].nota <= json[indice].nota){    			
    			indice=i;    			
			}	
		}							
		document.getElementById(id).innerHTML = out+json[indice].nombre;		
	} catch (error) {
		alert("Existe un Error" + " - " + error.message);
	}  	   	    
}

function mostrarPromedio(){
    calcularPromedio("calcular_promedio",notas_curso);
}
function mostrarObjeto(){
    leerJSON("objetos",notas_curso);
}
function mostrarMayor(){
    calcularMayor("estudiante_mayor",notas_curso);
}
function mostrarMenor(){
    calcularMenor("estudiante_menor",notas_curso);
}

</script>
</html>